<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Documentation MAGEO</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Documentation MAGEO</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#-le_langage">1. Le langage</a>
<ul class="sectlevel2">
<li><a href="#-où_a_t_on_besoin_du_langage">1.1. Où a-t-on besoin du langage</a></li>
<li><a href="#-description_du_langage_mageo">1.2. Description du langage MAGEO</a>
<ul class="sectlevel3">
<li><a href="#-comment_désigner_une_entité_dans_le_langage">1.2.1. Comment désigner une entité dans le langage</a></li>
<li><a href="#-les_instructions">1.2.2. Les instructions</a></li>
<li><a href="#-les_expressions">1.2.3. Les expressions</a></li>
<li><a href="#-utilisation_des_listes">1.2.4. Utilisation des listes</a></li>
</ul>
</li>
<li><a href="#-fonctions_mathématique_usuelles">1.3. Fonctions mathématique usuelles</a></li>
</ul>
</li>
<li><a href="#-les_fonctionalités">2. Les fonctionalités</a></li>
<li><a href="#-les_principes">3. Les principes</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>blablabla</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="-le_langage"><a class="anchor" href="#-le_langage"></a>1. Le langage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le langage Mageo est un langage essentiellement d’expressions, par opposition à un langage algorithmique. En effet, il ne nécessite généralement pas d’utiliser des formes syntaxiques élaborées, pour le contrôle de l’ordre d’exécution. Néanmoins des instructions comme les tests ou les boucles, existent et peuvent être utilisés pour développer des scripts sophistiqués, mais dans la grande majorité des modèles, on n’en a pas besoin.</p>
</div>
<div class="paragraph">
<p>Ce langage a été conçu pour écrire des scripts courts, de une à quelques lignes. Une expression ressemble quelquefois à une requête SQL, mais elle est totalement adaptée à la programmation par agent et à l’environnement Mageo.</p>
</div>
<div class="sect2">
<h3 id="-où_a_t_on_besoin_du_langage"><a class="anchor" href="#-où_a_t_on_besoin_du_langage"></a>1.1. Où a-t-on besoin du langage</h3>
<div class="paragraph">
<p>bla</p>
</div>
</div>
<div class="sect2">
<h3 id="-description_du_langage_mageo"><a class="anchor" href="#-description_du_langage_mageo"></a>1.2. Description du langage MAGEO</h3>
<div class="paragraph">
<p>Un script écrit en langage MAGEO est composé, selon le contexte, soit d’une liste d’affectations de variables locales (comme dans la partie variables locales d’un comportement) , soit d’une expression logique (comme pour la pertinence), soit d’une liste d’instructions (comme pour la partie action d’un comportement). Une expression nécessite de faire appel à des entités qui mémorisent des informations.</p>
</div>
<div class="sect3">
<h4 id="-comment_désigner_une_entité_dans_le_langage"><a class="anchor" href="#-comment_désigner_une_entité_dans_le_langage"></a>1.2.1. Comment désigner une entité dans le langage</h4>
<div class="paragraph">
<p>Dans MAGéo, comme dans tous les langages informatiques, pour accéder à l’information contenue dans une entité du modèle il suffit de la désigner, c’est-à-dire écrire son nom. Ces noms peuvent être de simples identificateurs de variables locales définies dans le script, ou provenir d’entités déjà existantes dans le modèle conceptuel comme une classe d’agent ou d’organisation, un attribut d’agent, un nom d’agent (composé du nom de sa classe suivi de son numéro d’individu, exemple : Case56), un nom relatif à une relation de localisation (passagers, hôtes, co-passagers), un nom de relation binaire ou générale, ou être défini dans l’interface de simulation, comme le nom d’un curseur, d’un champ de texte, etc. Un nom peut aussi désigner une fonction (prédéfinie ou propre au modèle) qui fait alors un calcul ou qui réalise une action dans le modèle.</p>
</div>
<div class="paragraph">
<p>Lorsque le modélisateur choisit un nom d’entité ou de variable locale, celui-ci ne doit pas être un mot déjà utilisé dans le langage ou le modèle (comme les mots réservés du langage : <code>ALL, ONE, COUNTS, EXISTS, OF, FROM, FOR, IN, DO, IF, etc.</code> (voir l’annexe de la grammaire du langage qui contient la liste exhaustive des mots réservés du langage ainsi que les noms de fonctions prédéfinies). Un identificateur commence toujours par une lettre, puis peut contenir ensuite des lettres ou des chiffres, mais pas de symboles autres qu’alphanumériques, par exemple <code>pop2015</code> est un nom correct, mais <code>pop-2015</code> ne l’est pas. Une lettre peut être accentuée, la casse (minuscule ou majuscule) n’est pas prise en compte. Un nom peut être simple ou composé de plusieurs parties séparées par un point <code>.</code> ou deux points lorsqu’il s’agit d’une référence à une organisation <code>:</code></p>
</div>
<div class="paragraph">
<p>Dans un nom composé, la partie la plus à gauche est celle qui désigne l’entité la plus globale (par exemple <code>Rel</code>), les suivantes désignent une entité interne à la précédente, etc.</p>
</div>
<div class="paragraph">
<p>Le contenu désigné par le nom dépend de toute la chaîne :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>Case2341.Force</code> </dt>
<dd>
<p>Désigne l’attribut (Décimal) « force » de l’instance d’agent <code>Case2341</code>.</p>
</dd>
<dt class="hdlist1"><code>Self.Force</code> </dt>
<dd>
<p>Désigne l’attribut (Décimal) « force » de l’agent <code>Self</code> en cours d’exécution dans le comportement où se trouve cette désignation. S’il n’y a pas d’ambiguïté, on peut omettre le mot Self et écrire simplement : <code>Force</code></p>
</dd>
<dt class="hdlist1"><code>Case</code>  </dt>
<dd>
<p>C’est le nom d’une classe agent, cela désigne la liste complète des instances de cette classe, qui équivaut à écrire : <code>[Case0, Case1,…,Case2500]</code></p>
</dd>
<dt class="hdlist1"><code>Case.Force</code> </dt>
<dd>
<p>La partie gauche dégignant une classe d’agents, l’ensemble désigne donc la liste de toutes les valeurs de l’attribut <code>Force</code> pour toutes les instances de la classe Case, ce qui équivaut à la liste de nombres : <code>[Case0.Force, Case1.force,…,Case2500.Force]</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Supposons qu’il y ait une relation de localisation de la classe <code>Jeton</code> vers la classe <code>Case</code>, dans laquelle la relation directe, qui à tout jeton associe son hôte, est appelée <code>MaCase</code>, une relation inverse appelée <code>MesJetons</code>, qui à toute case associe ses passagers jetons, et enfin <code>JetonsVoisins</code>, la relation de co-passagers, qui associe à chaque jeton les jetons qui sont localisés dans la même case que lui. Alors, les noms suivants désignent :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>Jeton18.MaCase</code> </dt>
<dd>
<p>Désigne la case sur laquelle se localise <code>Jeton18</code>.</p>
</dd>
<dt class="hdlist1"><code>Case2.MesJetons</code> </dt>
<dd>
<p>Désigne la liste des passagers de type <code>Jeton</code>, qui sont localisés sur case2.</p>
</dd>
<dt class="hdlist1"><code>Jeton18.JetonsVoisins</code> </dt>
<dd>
<p>Désigne la liste des agents de type <code>Jeton</code>, qui sont localisés sur la même case que Jeton18.</p>
</dd>
<dt class="hdlist1"><code>Jeton18.Neighbors(3)</code> </dt>
<dd>
<p>On fait appel ici  à une fonction prédéfinie <code>Neighbors(r)</code> qui est appelée depuis un jeton, On obtient alors la liste des agents passagers qui sont dans le voisinage de rayon 3 autour de <code>Jeton18</code> (on suppose ici qu’il n’y a que la classe <code>Jeton</code> qui est localisée sur les cases).</p>
</dd>
<dt class="hdlist1"><code>Jeton18.MaCase.Neighbors(3)</code> </dt>
<dd>
<p>Comme la fonction <code>Neighbors</code> est appellée depuis une case, on obtient ici la liste des cases qui sont dans le voisinage de rayon 3 autour de la case désignée par <code>Jeton18.MaCase</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Supposons enfin, que <code>Rel</code> soit une relation binaire ayant deux composants : <code>Jetons</code> et <code>Cases</code>, où <code>Jetons</code> est un composant de type <code>Jeton</code>, et <code>Cases</code> de type <code>Case</code>. La relation est donc composée de couples formées d’un jeton et d’une case. On peut écrire :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>Rel.Cases.Etat</code> </dt>
<dd>
<p>Désigne la liste des valeurs de l’attribut Etat des agents <code>Case</code> qui sont référencés dans la première colonne de la relation <code>Rel</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Ces quelques exemples montrent les principes et la richesse de la désignation des entités dans Magéo.</p>
</div>
</div>
<div class="sect3">
<h4 id="-les_instructions"><a class="anchor" href="#-les_instructions"></a>1.2.2. Les instructions</h4>
<div class="paragraph">
<p>Une instruction est soit une affectation, soit un appel à une fonction, soit une structure de contrôle.</p>
</div>
<div class="sect4">
<h5 id="-affectation"><a class="anchor" href="#-affectation"></a>Affectation</h5>
<div class="paragraph">
<p>L’affectation est l’action de copier une information dans une mémoire, qu’on appelle une variable, car elle doit pouvoir être modifiée, qui peut être une variable locale, un attribut d’agent ou de relation, Une variable est donc un emplacement de stockage d’information qui possède un nom (donné par le modélisateur, si possible explicite pour lui donner du sens), un type de donnée et un contenu. L’information que l’on copie provient soit aussi d’une variable lue, soit d’une expression qui est calculée et qui combine les valeurs de plusieurs variables.  La forme syntaxique d’une affectation est  de la forme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Variable :=  Expression</pre>
</div>
</div>
<div class="paragraph">
<p>L’expression est donc calculée dans la partie à de droite de <code>:=</code>  et le résultat est stocké dans la partie gauche, la <code>Variable</code> (on dit que la variable est <em>affectée</em> par l’expression ou <em>prend pour valeur</em> le résultat de l’expression). Le langage de Mageo n’étant pas déclaratif,  la variable est créée automatiquement et son type est déterminé par le type de l’expression.</p>
</div>
</div>
<div class="sect4">
<h5 id="-appel_de_fonctions"><a class="anchor" href="#-appel_de_fonctions"></a>Appel de fonctions</h5>
<div class="paragraph">
<p>L’appel à une fonction est formé simplement du nom de cette fonction suivi par la liste des paramètres d’appel entre parenthèses et séparés par des virgules. S’il n’y a pas de paramètres, on peut mettre des parenthèses vides, ou ne pas en mettre.</p>
</div>
<div class="paragraph">
<p>Une fonction renvoie toujours un résultat, par exemple : <code>y := SIN(x)</code>, dans ce cas l’instruction est une affectation car on a besoin de récupérer le résultat <code>y</code>. Les fonctions d’action renvoient aussi un résultat mais on en n’a pas toujours besoin, on n’écrit pas alors l’affectation, mais seulement l’appel à la fonction. La valeur renvoyée par une fonction d’action est appelée la satisfaction. La satisfaction vaut <code>TRUE</code> si l’action a pu se réaliser et <code>FALSE</code> sinon.</p>
</div>
<div class="paragraph">
<p>Par exemple on peut écrire  <code>ok := GOTO(Lieu)</code> si l’on a besoin de connaître la satisfaction de l’action (mémorisée dans la variable <code>ok</code>), ou sinon, l’instruction se résume à <code>GOTO(Lieu)</code></p>
</div>
</div>
<div class="sect4">
<h5 id="-instructions_de_contrôle"><a class="anchor" href="#-instructions_de_contrôle"></a>Instructions de contrôle</h5>
<div class="paragraph">
<p>Les instructions de contrôle permettent d’exécuter des actions ne manière non séquentielle, L’ordre séquentiel, consiste à exécuter l’instruction de la ligne 1, puis celle de la ligne 2, etc. jusqu’à la dernière ligne. On dispose de quatre instructions de contrôles qui se regroupent en deux catégories : les tests et les boucles.</p>
</div>
<div class="sect5">
<h6 id="-les_tests"><a class="anchor" href="#-les_tests"></a>Les tests</h6>
<div class="paragraph">
<p>La conditionnelle, qui est de la forme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>IF Condition THEN <i class="conum" data-value="1"></i><b>(1)</b>
  BlocAction <i class="conum" data-value="2"></i><b>(2)</b>
ENDIF</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Condition</code> est une expression booléenne (<code>TRUE</code> ou <code>FALSE</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>BlocAction</code> est une ou plusieurs actions, chaque action étant écrite sur une ligne.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les actions du <code>BlocAction</code> ne seront exécutées que si la Condition est vraie</p>
</div>
<div class="paragraph">
<p>L’alternative, qui est de la forme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>IF Condition THEN <i class="conum" data-value="1"></i><b>(1)</b>
  BlocAction1
ELSE
  BlocAction2 <i class="conum" data-value="2"></i><b>(2)</b>
ENDIF</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Condition</code> est une expression booléenne (<code>TRUE</code> ou <code>FALSE</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>BlocAction1</code> et <code>BlocAction2</code> sont constitués d’une ou plusieurs actions.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les actions du <code>BlocAction1</code> ne seront exécutées que si la <code>Condition</code> est vraie et Les actions du <code>BlocAction2</code> ne seront exécutées que si la Condition est <code>fausse</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="-les_boucles"><a class="anchor" href="#-les_boucles"></a>Les boucles</h6>
<div class="paragraph">
<p>Ici aussi, deux formes de boucles sont possibles :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La boucle de répétition simple <code>LOOP .. ENDLOOP</code></p>
</li>
<li>
<p>La boucle  <code>FOR .. IN .. DO .. ENDFOR</code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>LOOP</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>LOOP n <i class="conum" data-value="1"></i><b>(1)</b>
 BlocAction
ENDLOOP</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>n</code> est un nombre entier qui indique combien de fois les actions du <code>blocAction</code> doivent être exécutées.</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Un exemple (formel)  :</div>
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LOOP</th>
<th class="tableblock halign-left valign-top">liste d&#8217;instruction</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre> LOOP 3
  GOTO(UnLieu)
  UnLieu := UnLieu + UnPas
ENDLOOP</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre>  GOTO(UnLieu)
  UnLieu := UnLieu + UnPas
  GOTO(UnLieu)
  UnLieu := UnLieu + UnPas
  GOTO(UnLieu)
  UnLieu := UnLieu + UnPas</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
<div class="paragraph">
<p><strong>FOR</strong></p>
</div>
<div class="paragraph">
<p>La boucle FOR avec variable muette, est de la forme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>FOR x IN Liste DO <i class="conum" data-value="1"></i><b>(1)</b>
    BlocAction(x) <i class="conum" data-value="2"></i><b>(2)</b>
ENDFOR</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>pour chaque terme <code>x</code> de la liste, &#8230;&#8203;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>... faire exécuter les instructions du <code>blocAction</code> selon la valeur de x.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>x</code> est la variable muette qui parcourt chaque terme de la liste. S’il y a 58 termes dans la liste, les actions du bloc seront exécutées 58 fois, en tenant compte à chaque fois de la valeur de <code>x</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Un autre exemple de code avec la syntaxe <code>FOR</code>  :</div>
<div class="content">
<div class="paragraph">
<p>Si la liste <code>L</code> une liste de nombres dont la longueur est inconnue,
les instructions suivantes permettent de calculer la moyenne des termes de la liste :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>n :=0
S :=0

FOR x IN L DO
  n := n+1
  S := S+x
ENDFOR

IF n&gt;0 THEN
  Moy := S/n
ELSE
  Moy := 0 //pour éviter de diviser par 0
ENDIF</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="-les_expressions"><a class="anchor" href="#-les_expressions"></a>1.2.3. Les expressions</h4>

</div>
<div class="sect3">
<h4 id="-utilisation_des_listes"><a class="anchor" href="#-utilisation_des_listes"></a>1.2.4. Utilisation des listes</h4>

</div>
</div>
<div class="sect2">
<h3 id="-fonctions_mathématique_usuelles"><a class="anchor" href="#-fonctions_mathématique_usuelles"></a>1.3. Fonctions mathématique usuelles</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="-les_fonctionalités"><a class="anchor" href="#-les_fonctionalités"></a>2. Les fonctionalités</h2>
<div class="sectionbody">
<div class="paragraph">
<p>bla</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="-les_principes"><a class="anchor" href="#-les_principes"></a>3. Les principes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>bla</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-03-07 17:12:25 CET
</div>
</div>
</body>
</html>