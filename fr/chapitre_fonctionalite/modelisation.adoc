== L’interface de modélisation

La fenêtre de modélisation est celle dans laquelle est construit le modèle conceptuel, sous une forme arborescente composée d’entités et de relations. La méthode de construction d’un modèle consiste à ajouter des organisations à l’agent modèle (et aux agents en général), organisations qui contiennent elles-mêmes des classes d’agents composants. Puis on ajoute des relations entre classes agent. Vient ensuite la mise en place des comportements. A ce niveau on travaille de manière uniquement graphique, sans entrer dans les détails internes (sauf pour changer éventuellement leur nom), chaque entité conceptuelle étant concrétisée par un symbole graphique particulier et les relations par des flèches et des lignes entre ces entités.

=== La symbolique des entités et des relations du modèle conceptuel

Les entités d’un modèle conceptuel sont construites selon la symbolique suivante :


.Entités du modèle conceptuel  :
====
|===
| Type d'entité | Symbole graphique
| Agent unique | image:/assets/image004.jpg[alt=""]
| Agent générique | image:/assets/image006.jpg[alt=""]
| Comportement simple | image:/assets/image007.png[alt=""]
| Comportement sous forme de diagramme de transition | image:/assets/image008.png[alt=""]
| Organisation sociale (Population) | image:/assets/image010.jpg[alt=""]
| Organisation spatiale | image:/assets/image012.jpg[alt=""]
|===
====

Les relations entre entités graphiques sont construites selon la symbolique suivante :


.Relations du modèle conceptuel  :
====

|===
| Type de relation | Définition | Symbolique

| Appronfondissement | `Agent -> Organisation` | image:/assets/image014.jpg[alt=""]

| Composition | `Organisation -> Agent` | image:/assets/image016.png[alt=""]

| Localisation | `Agent -> Agent` | image:/assets/image020.jpg[alt=""]

| Localisation étendue | `Agent -> (Agent, ... , Agent)` |image:/assets/image022.jpg[alt=""]

|===

====

=== Principe de construction d’un modèle dans MAGEO

La seule entité présente par défaut lors de la création d’un nouveau modèle est l’agent unique « Modèle ». Un clic droit sur cette entité, et sur toute entité en général, permet d’afficher un menu contextuel (voir Figure 2) qui contient toutes les possibilités pour compléter le modèle, c’est-à-dire ajouter des organisations, des comportements et diverses relations. Un simple clic (bouton gauche) sur une entité permet de la sélectionner, un double-clic permet d’entrer dans l’entité sélectionnée, c’est-à-dire d’afficher son dialogue de paramétrage.

image:/assets/image024.jpg[alt="Menu contextuel associé à un type d'entité (ici un agent)"]

En utilisant les choix proposés par ce menu, puis après le positionnement et le dimensionnement des différentes entités créées, le modèle conceptuel se construit progressivement. La Figure 4 illustre un modèle conceptuel complet.

image:/assets/image026.jpg[alt="Exemple de modèle conceptuel"]

=== Paramétrage des entités conceptuelles

Les organisations et les classes d’agents créées sont ensuite renseignées afin de donner des informations qui seront utilisées lors de l’instanciation des entités physiques.

==== Paramétrage des agents

Un agent possède des attributs et un programme d’action. Celui-ci est un script qui indique comment ses différents comportements seront exécutés lors d’un pas de temps. Un agent peut aussi possèder un système interne formé de différentes organisations. Pour gérer son système interne, une liste de ces organisations indique leur ordonnancement lors de l’initialisation et de l’exécution. 

image::/assets/image027.png[align="center", caption="Dialogue de paramétrage d'un agent"]

’interface de dialogue d’une classe agent permet de définir le contenu et la dynamique des agents. Elle contient :

-          Un identifiant générique de classe, qui sert à définir les identifiants des instances en ajoutant à ce nom un numéro d’ordre ;

-          Une liste d’attributs, qui représentent l’état de l’agent ;

-          La définition du programme d’action, qui précise l’ordonnancement des comportements de l’agent lors d’un pas de temps, au moyen d’un langage dédié (voir 5.3.4.) ;

-          L’ordonnancement des organisations internes, qui indique l’ordre dans lequel seront exécutés les comportements des agents internes lors d’un pas de temps (voir 5.3.2).

Les attributs d’une classe agent doivent être définis dans le tableau des attributs de cette classe. Cette définition consiste à renseigner les 4 champs suivants :

-          Le nom de cet attribut ;

-          Le type de cet attribut, qui peut être un nombre entier, un nombre décimal, un nombre logique (nombre décimal entre 0 et 1), une chaîne de caractères, un vecteur, un agent, ou un énuméré. Dans MAGéo, une règle fondamentale est qu’un nom d’attribut ne peut être utilisé dans plusieurs classes agents que si le type associé est le même.

-          L’expression d’initialisation, écrite en langage MAGéo, qui sera évaluée à l’initialisation du modèle pour fournir la valeur initiale de l’attribut. Cette expression doit donc être du type indiqué dans la colonne précédente. Par exemple, un attribut entier peut prendre une valeur initiale aléatoire entre 0 et 100 par RandInt(0, 100).

-          L’expression de la dynamique de cet attribut, également écrite en langage MAGéo, est une expression donnant une nouvelle valeur à l’attribut, et qui sera évoquée lors d’un pas de temps si elle est indiquée dans le programme d’action à l’aide de la fonction Calc(). Par exemple, pour que l’attribut Age soit incrémenté à chaque itération, on peut écrire Age+1 dans le champ de dynamique de cet attribut, et l’invoquer en écrivant Calc(Age) dans le programme d’action.

==== Paramétrage des organisations

==== Paramétrage des comportements

==== Paramétrage des relations de localisation

==== Paramétrage des relations générales